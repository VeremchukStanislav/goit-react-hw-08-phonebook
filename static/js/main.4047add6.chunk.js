(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{10:function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return E})),n.d(e,"c",(function(){return _}));var c,r,a,o,s=n(3),u={registerRequest:Object(s.b)("auth/registerRequest"),registerSuccess:Object(s.b)("auth/registerSuccess"),registerError:Object(s.b)("auth/registerError"),loginRequest:Object(s.b)("auth/loginRequest"),loginSuccess:Object(s.b)("auth/loginSuccess"),loginError:Object(s.b)("auth/loginError"),logoutRequest:Object(s.b)("auth/logoutRequest"),logoutSuccess:Object(s.b)("auth/logoutSuccess"),logoutError:Object(s.b)("auth/logoutError"),getCurrentUserRequest:Object(s.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(s.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(s.b)("auth/getCurrentUserError")},i=n(2),b=n(8),l={name:null,email:null},j=Object(s.c)(l,(c={},Object(i.a)(c,u.registerSuccess,(function(t,e){return e.payload.user})),Object(i.a)(c,u.loginSuccess,(function(t,e){return e.payload.user})),Object(i.a)(c,u.logoutSuccess,(function(){return l})),Object(i.a)(c,u.getCurrentUserSuccess,(function(t,e){return e.payload})),c)),d=Object(s.c)(null,(r={},Object(i.a)(r,u.registerSuccess,(function(t,e){return e.payload.token})),Object(i.a)(r,u.loginSuccess,(function(t,e){return e.payload.token})),Object(i.a)(r,u.logoutSuccess,(function(){return null})),r)),f=function(t,e){return e.payload},O=Object(s.c)(null,(a={},Object(i.a)(a,u.registerError,f),Object(i.a)(a,u.loginError,f),Object(i.a)(a,u.logoutError,f),Object(i.a)(a,u.getCurrentUserError,f),a)),h=Object(s.c)(!1,(o={},Object(i.a)(o,u.registerSuccess,(function(){return!0})),Object(i.a)(o,u.loginSuccess,(function(){return!0})),Object(i.a)(o,u.getCurrentUserSuccess,(function(){return!0})),Object(i.a)(o,u.registerError,(function(){return!1})),Object(i.a)(o,u.loginError,(function(){return!1})),Object(i.a)(o,u.getCurrentUserError,(function(){return!1})),Object(i.a)(o,u.logoutSuccess,(function(){return!1})),o)),p=Object(b.b)({user:j,isAuthenticated:h,token:d,error:O}),g=n(9),v=n.n(g),C=n(19),x=n(17),m=n.n(x);m.a.defaults.baseURL="https://connections-api.herokuapp.com";var k=function(t){m.a.defaults.headers.common.Authorization="Bearer ".concat(t)},S=function(){m.a.defaults.headers.common.Authorization=""},E={register:function(t){return function(){var e=Object(C.a)(v.a.mark((function e(n){var c,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(u.registerRequest()),e.prev=1,e.next=4,m.a.post("/users/signup",t);case 4:c=e.sent,r=c.data,k(r.token),n(u.registerSuccess(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n(u.registerError(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(C.a)(v.a.mark((function e(n){var c,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(u.loginRequest()),e.prev=1,e.next=4,m.a.post("/users/login",t);case 4:c=e.sent,r=c.data,k(r.token),n(u.loginSuccess(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n(u.loginError(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(C.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(u.logoutRequest()),t.prev=1,t.next=4,m.a.post("/users/logout");case 4:S(),e(u.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(u.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(t){return function(){var t=Object(C.a)(v.a.mark((function t(e,n){var c,r,a,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n(),r=c.auth.token){t.next=3;break}return t.abrupt("return");case 3:return k(r),e(u.getCurrentUserRequest()),t.prev=5,t.next=8,m.a.get("/users/current");case 8:a=t.sent,o=a.data,e(u.getCurrentUserSuccess(o)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),e(u.getCurrentUserError(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()}},_={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name}}},107:function(t,e,n){},110:function(t,e,n){"use strict";n.r(e);n(59);var c,r,a,o=n(0),s=n.n(o),u=n(27),i=n.n(u),b=n(18),l=n(37),j=n(38),d=n(41),f=n(40),O=n(7),h=n(11),p=n(10),g=n(34),v=n(21),C=n(30),x=n(1),m=["component","isAuthenticated","redirectTo"],k=Object(h.b)((function(t){return{isAuthenticated:p.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=t.redirectTo,r=Object(C.a)(t,m);return Object(x.jsx)(O.b,Object(v.a)(Object(v.a)({},r),{},{render:function(t){return n?Object(x.jsx)(e,Object(v.a)({},t)):Object(x.jsx)(O.a,{to:c})}}))})),S=["component","isAuthenticated","redirectTo"],E=Object(h.b)((function(t){return{isAuthenticated:p.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=t.redirectTo,r=Object(C.a)(t,S);return Object(x.jsx)(O.b,Object(v.a)(Object(v.a)({},r),{},{render:function(t){return n&&r.restricted?Object(x.jsx)(O.a,{to:c}):Object(x.jsx)(e,Object(v.a)({},t))}}))})),_=n(54),y=n.n(_),R=function(t){var e=t.children;return Object(x.jsx)("div",{className:y.a.container,children:e})},A=n(24),q=n.n(A),w=Object(h.b)((function(t){return{isAuthenticated:p.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(x.jsxs)("nav",{children:[Object(x.jsx)(b.b,{to:"/",exact:!0,className:q.a.link,activeClassName:q.a.activeLink,children:"Home"}),e&&Object(x.jsx)(b.b,{to:"/contacts",exact:!0,className:q.a.link,activeClassName:q.a.activeLink,children:"Contacts"})]})})),U=n.p+"static/media/default-avatar.a0316acc.svg",L=n(25),N=n.n(L),I={onLogout:p.a.logOut},T=Object(h.b)((function(t){return{name:p.c.getUsername(t),avatar:U}}),I)((function(t){var e=t.avatar,n=t.name,c=t.onLogout;return Object(x.jsxs)("div",{className:N.a.container,children:[Object(x.jsx)("img",{src:e,alt:"",width:"32",className:N.a.avatar}),Object(x.jsxs)("span",{className:N.a.name,children:["Welcome, ",n]}),Object(x.jsx)("button",{className:N.a.button,type:"button",onClick:c,children:"Logout"})]})})),z=n(26),B=n.n(z),M=function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(b.b,{to:"/register",exact:!0,className:B.a.link,activeClassName:B.a.activeLink,children:"Register"}),Object(x.jsx)(b.b,{to:"/login",exact:!0,className:B.a.link,activeClassName:B.a.activeLink,children:"Login"})]})},F=n(55),D=n.n(F),G=Object(h.b)((function(t){return{isAuthenticated:p.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(x.jsxs)("header",{className:D.a.header,children:[Object(x.jsx)(w,{}),e?Object(x.jsx)(T,{}):Object(x.jsx)(M,{})]})})),H=Object(o.lazy)((function(){return n.e(1).then(n.bind(null,111))})),J=Object(o.lazy)((function(){return n.e(0).then(n.bind(null,114))})),V=Object(o.lazy)((function(){return n.e(3).then(n.bind(null,112))})),K=Object(o.lazy)((function(){return n.e(2).then(n.bind(null,113))})),W=function(t){Object(d.a)(n,t);var e=Object(f.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurretnUser()}},{key:"render",value:function(){return Object(x.jsxs)(R,{children:[Object(x.jsx)(o.Suspense,{fallback:Object(x.jsx)(g.a,{}),children:Object(x.jsx)(G,{})}),Object(x.jsx)(o.Suspense,{fallback:Object(x.jsx)(g.a,{}),children:Object(x.jsxs)(O.d,{children:[Object(x.jsx)(E,{exact:!0,path:"/",component:H}),Object(x.jsx)(E,{path:"/register",restricted:!0,redirectTo:"/contacts",component:V}),Object(x.jsx)(E,{path:"/login",restricted:!0,redirectTo:"/contacts",component:K}),Object(x.jsx)(k,{path:"/contacts",redirectTo:"/login",component:J})]})})]})}}]),n}(o.Component),P={onGetCurretnUser:p.a.getCurrentUser},Q=Object(h.b)(null,P)(W),X=(n(107),n(56)),Y=n(29),Z=n(3),$=n(8),tt=n(20),et=n(57),nt=n.n(et),ct=n(4),rt=(n(39),n(2)),at=[],ot="",st=!1,ut=null,it=Object(Z.c)(at,(c={},Object(rt.a)(c,ct.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(rt.a)(c,ct.a.addContactSuccess,(function(t,e){var n=e.payload;return[].concat(Object(Y.a)(t),[n])})),Object(rt.a)(c,ct.a.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),c)),bt=Object(Z.c)(ot,Object(rt.a)({},ct.a.changeFilter,(function(t,e){return e.payload}))),lt=function(t,e){return e.payload},jt=Object(Z.c)(ut,(r={},Object(rt.a)(r,ct.a.fetchContactsError,lt),Object(rt.a)(r,ct.a.addContactError,lt),Object(rt.a)(r,ct.a.deleteContactError,lt),Object(rt.a)(r,ct.a.clearError,(function(){return null})),r)),dt=Object(Z.c)(st,(a={},Object(rt.a)(a,ct.a.fetchContactsRequest,(function(){return!0})),Object(rt.a)(a,ct.a.fetchContactsSuccess,(function(){return!1})),Object(rt.a)(a,ct.a.fetchContactsError,(function(){return!1})),Object(rt.a)(a,ct.a.addContactRequest,(function(){return!0})),Object(rt.a)(a,ct.a.addContactSuccess,(function(){return!1})),Object(rt.a)(a,ct.a.addContactError,(function(){return!1})),Object(rt.a)(a,ct.a.deleteContactRequest,(function(){return!0})),Object(rt.a)(a,ct.a.deleteContactSuccess,(function(){return!1})),Object(rt.a)(a,ct.a.deleteContactError,(function(){return!1})),a)),ft=Object($.b)({items:it,filter:bt,loading:dt,error:jt}),Ot=(n(36),n(58)),ht=n.n(Ot),pt=[].concat(Object(Y.a)(Object(Z.d)({serializableCheck:{ignoredActions:[tt.a,tt.f,tt.b,tt.c,tt.d,tt.e]}})),[ht.a]),gt={key:"auth",storage:nt.a,whitelist:["token"]},vt=Object($.b)({auth:Object(tt.g)(gt,p.b),contacts:ft}),Ct=Object(Z.a)({reducer:vt,middleware:pt,devTools:!1}),xt={store:Ct,persistor:Object(tt.h)(Ct)};i.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(h.a,{store:xt.store,children:Object(x.jsx)(X.a,{loading:null,persistor:xt.persistor,children:Object(x.jsx)(b.a,{children:Object(x.jsx)(Q,{})})})})}),document.getElementById("root"))},24:function(t,e,n){t.exports={link:"Navigation_link__K-jId",activeLink:"Navigation_activeLink__2pV5y"}},25:function(t,e,n){t.exports={container:"UserMenu_container__HTo61",avatar:"UserMenu_avatar__2rAtS",button:"UserMenu_button__60696",name:"UserMenu_name__164s2"}},26:function(t,e,n){t.exports={link:"AuthNav_link__2KIRL",activeLink:"AuthNav_activeLink__BWDrG"}},34:function(t,e,n){"use strict";var c=n(51),r=n.n(c),a=n(52),o=n.n(a),s=n(1);e.a=function(){return Object(s.jsx)(r.a,{className:o.a.Loader,type:"Oval",color:"#CB2400",height:100,width:100,timeout:2e3})}},36:function(t,e,n){"use strict";var c=n(22),r=function(t){return t.contacts.items},a=function(t){return t.contacts.filter},o=Object(c.a)([r,a],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}));e.a={getLoading:function(t){return t.contacts.loading},getContactItems:r,getFilter:a,getVisibleContacts:o}},39:function(t,e,n){"use strict";var c=n(9),r=n.n(c),a=n(19),o=n(17),s=n.n(o),u=n(4);e.a={fetchContacts:function(){return function(){var t=Object(a.a)(r.a.mark((function t(e){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(u.a.fetchContactsRequest()),t.prev=1,t.next=4,s.a.get("/contacts");case 4:n=t.sent,c=n.data,e(u.a.fetchContactsSuccess(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(u.a.fetchContactsError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},addContact:function(t,e){return function(){var n=Object(a.a)(r.a.mark((function n(c){var a,o,i;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={name:t,number:e},c(u.a.addContactRequest()),n.prev=2,n.next=5,s.a.post("/contacts",a);case 5:o=n.sent,i=o.data,c(u.a.addContactSuccess(i)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),c(u.a.addContactError(n.t0.message));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(t){return n.apply(this,arguments)}}()},deleteContact:function(t){return function(){var e=Object(a.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(u.a.deleteContactRequest()),e.prev=1,e.next=4,s.a.delete("/contacts/".concat(t));case 4:n(u.a.deleteContactSuccess(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n(u.a.deleteContactError(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}}},4:function(t,e,n){"use strict";var c=n(3),r=Object(c.b)("contacts/fetchContactsRequest"),a=Object(c.b)("contacts/fetchContactsSuccess"),o=Object(c.b)("contacts/fetchContactsError"),s=Object(c.b)("contacts/addContactRequest"),u=Object(c.b)("contacts/addContactSuccess"),i=Object(c.b)("contacts/addContactError"),b=Object(c.b)("contacts/deleteContactRequest"),l=Object(c.b)("contacts/deleteContactSuccess"),j=Object(c.b)("contacts/deleteContactError"),d=Object(c.b)("contacts/changeFilter"),f=Object(c.b)("contacts/clearError");e.a={fetchContactsRequest:r,fetchContactsSuccess:a,fetchContactsError:o,addContactRequest:s,addContactSuccess:u,addContactError:i,deleteContactRequest:b,deleteContactSuccess:l,deleteContactError:j,changeFilter:d,clearError:f}},52:function(t,e,n){t.exports={Loader:"Loader_Loader__x1IyD"}},54:function(t,e,n){t.exports={container:"Container_container__2vV3o"}},55:function(t,e,n){t.exports={header:"AppBar_header__lumHT",link:"AppBar_link__aI3Jf"}}},[[110,5,6]]]);
//# sourceMappingURL=main.4047add6.chunk.js.map